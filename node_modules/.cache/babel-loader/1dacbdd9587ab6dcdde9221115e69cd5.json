{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axiosInstance from \"../Helper/Helper\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nconst initialState = {\n  isloggedIn: false,\n  redirectTo: null,\n  SetToken: \"\",\n  redirectToo: null\n};\nexport const register = createAsyncThunk(\"/user/signup\", async formData => {\n  let res = await axiosInstance.post(`/user/signup`, formData);\n  let resData = res === null || res === void 0 ? void 0 : res.data;\n  return resData;\n});\nexport const login = createAsyncThunk(\"/user/signin\", async formData => {\n  let res = await axiosInstance.post(`/user/signin/`, formData);\n  let resData = res === null || res === void 0 ? void 0 : res.data;\n  return resData;\n});\nexport const AuthSlice = createSlice({\n  name: \"registration\",\n  initialState,\n  reducers: {\n    reset_redirectTo: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      state.redirectTo = payload;\n    },\n    reset_redirectToo: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      state.redirectToo = payload;\n    },\n    check_token: (state, _ref3) => {\n      let {\n        payload\n      } = _ref3;\n      let token = localStorage.getItem(\"token\");\n      if (token !== null && token !== undefined) {\n        state.isloggedIn = true;\n      }\n    },\n    handleLoggedout: (state, _ref4) => {\n      let {\n        payload\n      } = _ref4;\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"Name\");\n      localStorage.removeItem(\"image\");\n      localStorage.removeItem(\"title\");\n      state.isloggedIn = false;\n      toast(\"Logout SuccessFull\");\n    },\n    handleRegister: (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      localStorage.removeItem(\"name\");\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(register.pending, (state, action) => {\n      state.status = \"loading\";\n    }).addCase(register.fulfilled, (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.status = \"idle\";\n      if ((payload === null || payload === void 0 ? void 0 : payload.status) === 200) {\n        var _payload$data, _payload$data2;\n        state.isloggedIn = true;\n        localStorage.setItem(\"Name\", payload === null || payload === void 0 ? void 0 : (_payload$data = payload.data) === null || _payload$data === void 0 ? void 0 : _payload$data.first_name);\n        localStorage.setItem(\"image\", payload === null || payload === void 0 ? void 0 : (_payload$data2 = payload.data) === null || _payload$data2 === void 0 ? void 0 : _payload$data2.profile_pic);\n        state.redirectToo = \"/login\";\n        toast(payload === null || payload === void 0 ? void 0 : payload.message);\n      } else {\n        if ((payload === null || payload === void 0 ? void 0 : payload.status) === 201) {\n          toast(payload === null || payload === void 0 ? void 0 : payload.message);\n        }\n      }\n    }).addCase(register.rejected, (state, action) => {\n      state.status = \"idle\";\n    }).addCase(login.pending, (state, action) => {\n      state.login_status = \"loading\";\n    }).addCase(login.fulfilled, (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      if ((payload === null || payload === void 0 ? void 0 : payload.status) === 200) {\n        var _payload$data3, _payload$data4;\n        state.login_status = \"idle\";\n        state.redirectTo = \"/productlist\";\n        state.isloggedIn = true;\n        localStorage.setItem(\"token\", payload === null || payload === void 0 ? void 0 : payload.token);\n        localStorage.setItem(\"Name\", payload === null || payload === void 0 ? void 0 : (_payload$data3 = payload.data) === null || _payload$data3 === void 0 ? void 0 : _payload$data3.first_name);\n        localStorage.setItem(\"image\", payload === null || payload === void 0 ? void 0 : (_payload$data4 = payload.data) === null || _payload$data4 === void 0 ? void 0 : _payload$data4.profile_pic);\n        toast(payload === null || payload === void 0 ? void 0 : payload.message);\n      } else {\n        if ((payload === null || payload === void 0 ? void 0 : payload.status) === 201) {\n          toast(payload === null || payload === void 0 ? void 0 : payload.message);\n        }\n      }\n    }).addCase(login.rejected, (state, _ref8) => {\n      let {\n        payload\n      } = _ref8;\n    });\n  }\n});\nexport const {\n  reset_redirectTo,\n  check_token,\n  handleLoggedout,\n  reset_redirectToo,\n  handleRegister\n} = AuthSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axiosInstance","toast","initialState","isloggedIn","redirectTo","SetToken","redirectToo","register","formData","res","post","resData","data","login","AuthSlice","name","reducers","reset_redirectTo","state","_ref","payload","reset_redirectToo","_ref2","check_token","_ref3","token","localStorage","getItem","undefined","handleLoggedout","_ref4","removeItem","handleRegister","_ref5","extraReducers","builder","addCase","pending","action","status","fulfilled","_ref6","_payload$data","_payload$data2","setItem","first_name","profile_pic","message","rejected","login_status","_ref7","_payload$data3","_payload$data4","_ref8","actions"],"sources":["C:/React project/Archive/src/ReduxToolkit/AuthSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axiosInstance from \"../Helper/Helper\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nconst initialState = {\r\n  isloggedIn: false,\r\n  redirectTo: null,\r\n  SetToken: \"\",\r\n  redirectToo: null,\r\n  \r\n};\r\n\r\nexport const register = createAsyncThunk(\r\n  \"/user/signup\",\r\n\r\n  async (formData) => {\r\n    let res = await axiosInstance.post(`/user/signup`, formData);\r\n\r\n    let resData = res?.data;\r\n\r\n    return resData;\r\n  }\r\n);\r\n\r\nexport const login = createAsyncThunk(\r\n  \"/user/signin\",\r\n\r\n  async (formData) => {\r\n    let res = await axiosInstance.post(`/user/signin/`, formData);\r\n\r\n    let resData = res?.data;\r\n\r\n    return resData;\r\n  }\r\n);\r\n\r\nexport const AuthSlice = createSlice({\r\n  name: \"registration\",\r\n  initialState,\r\n  reducers: {\r\n    reset_redirectTo: (state, { payload }) => {\r\n      state.redirectTo = payload;\r\n    },\r\n\r\n    reset_redirectToo: (state, { payload }) => {\r\n      state.redirectToo = payload;\r\n    },\r\n    check_token: (state, { payload }) => {\r\n      let token = localStorage.getItem(\"token\");\r\n      if (token !== null && token !== undefined) {\r\n        state.isloggedIn = true;\r\n      }\r\n    },\r\n    handleLoggedout: (state, { payload }) => {\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"Name\");\r\n      localStorage.removeItem(\"image\");\r\n      localStorage.removeItem(\"title\");\r\n      state.isloggedIn = false;\r\n      toast(\"Logout SuccessFull\");\r\n    },\r\n\r\n    handleRegister: (state, { payload }) => {\r\n      localStorage.removeItem(\"name\");\r\n    },\r\n  },\r\n\r\n  extraReducers: (builder) => {\r\n    builder\r\n\r\n      .addCase(register.pending, (state, action) => {\r\n        state.status = \"loading\";\r\n      })\r\n      .addCase(register.fulfilled, (state, { payload }) => {\r\n        state.status = \"idle\";\r\n        if (payload?.status === 200) {\r\n          state.isloggedIn = true;\r\n          localStorage.setItem(\"Name\", payload?.data?.first_name);\r\n          localStorage.setItem(\"image\", payload?.data?.profile_pic);\r\n          state.redirectToo = \"/login\";\r\n          toast(payload?.message);\r\n        } else {\r\n          if (payload?.status === 201) {\r\n            toast(payload?.message);\r\n          }\r\n        }\r\n      })\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.status = \"idle\";\r\n      })\r\n\r\n      .addCase(login.pending, (state, action) => {\r\n        state.login_status = \"loading\";\r\n      })\r\n      .addCase(login.fulfilled, (state, { payload }) => {\r\n        if (payload?.status === 200) {\r\n          state.login_status = \"idle\";\r\n          state.redirectTo = \"/productlist\";\r\n          state.isloggedIn = true;\r\n          localStorage.setItem(\"token\", payload?.token);\r\n          localStorage.setItem(\"Name\", payload?.data?.first_name);\r\n          localStorage.setItem(\"image\", payload?.data?.profile_pic);\r\n          toast(payload?.message);\r\n        } else {\r\n          if (payload?.status === 201) {\r\n            toast(payload?.message);\r\n          }\r\n        }\r\n      })\r\n      .addCase(login.rejected, (state, { payload }) => {});\r\n  },\r\n});\r\n\r\nexport const {\r\n  reset_redirectTo,\r\n  check_token,\r\n  handleLoggedout,\r\n  reset_redirectToo,\r\n  handleRegister,\r\n} = AuthSlice.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}